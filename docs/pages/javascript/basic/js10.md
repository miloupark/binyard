# 화살표 함수와 콜백 함수

## 화살표 함수 (Arrow Function)

화살표 함수란, ES6에서 도입된 간결한 함수 표현식의 문법이다. <br>
function 키워드 대신 `=>` 기호를 사용해 함수를 정의하고, 코드가 간단해지고 this 바인딩 방식이 달라지는 것이 특징이다.

<br>

### 기본 문법

```js
const 함수이름 = (매개변수) => {
  // 함수 실행 코드
};
```

<br>

### 일반 함수 표현식과 비교

```js
// 일반 함수 표현식
const add = function (a, b) {
  return a + b;
};

// 화살표 함수
const add = (a, b) => {
  return a + b;
};
```

- 두 방식은 동작은 같지만, 화살표 함수가 더 간결하다.

<br>

#### 한 줄로 축약 가능

```js
// 일반적인 화살표 함수 형태
const add = (a, b) => {
  return a + b;
};

// 축약형
const add = (a, b) => a + b;

console.log(add(10, 20)); // 30
```

- 함수의 본문이 한 줄이고 return만 있는 경우, `중괄호 {}`와 `return 키워드`를 생략할 수 있다.
- 화살표 함수는 코드가 훨씬 간단해진다는 장점 덕분에 콜백 함수에서도 유용하게 사용된다.

<br>

## 콜백함수 (Callback Function)

콜백 함수란, 다른 함수에 인자로 전달되어 나중에 호출되는 함수를 말한다.
즉, 특정 작업이 끝난 후 또는 어떤 조건/이벤트가 발생했을 때 실행되는 함수이다.

자바스크립트에서 함수는 일급 객체이므로, 함수를 변수에 저장하거나 인자로 전달할 수 있다. 콜백 함수는 주로 비동기 처리, 이벤트 처리, 배열 메서드 등에서 자주 사용된다. "필요할 때 실행"되도록 지연시켜 사용하는 대표적인 패턴이다.

<br>

### 콜백함수 특징

- 함수를 다른 함수의 인자로 전달할 수 있다.
- 전달된 함수는 즉시 실행되지 않고, 특정 조건이 충족되면 나중에 실행된다.
- 자바스크립트에서 비동기 프로그래밍의 기본 패턴으로 사용된다.

<br>

### 콜백함수 예시 1

```js
const printResult = (a, b) => {
  let result = a + b;
  console.log("결과: " + result);
};

const doubleResult = (a, b) => {
  let result = a + b;
  console.log("결과에 2를 곱한 값: " + result * 2);
};

printResult(5, 3);
doubleResult(5, 3);
```

- 위 코드에서는 두 함수 모두 두 개의 매개변수를 받아 a + b를 계산하는 공통 로직을 포함하고 있다.
- 이러한 중복된 부분은 아래의 코드와 같이 하나의 함수로 분리하여 코드의 재사용성과 가독성을 높일 수 있다.

```js
const calculate = (a, b, callback) => {
  let result = a + b; // 공통 로직
  callback(result); // 결과를 콜백 함수로 전달
};

const printResult = (result) => {
  console.log("결과: " + result);
};

const doubleResult = (result) => {
  console.log("결과에 2를 곱한 값: " + result * 2);
};

calculate(5, 3, printResult); // 결과: 8
calculate(5, 3, doubleResult); // 결과에 2를 곱한 값: 16
```

- calculate는 a + b를 계산하고 callback(result)로 결과를 전달한다.
- printResult와 doubleResult는 이 결과를 받아 각기 다른 방식으로 출력한다.
- 이렇게 하면 공통 로직을 분리하면서, 다양한 후속 동작을 콜백으로 넘길 수 있는 구조가 된다.

<br>

### 콜백함수 예시 2

```js
const testFunc = (callback) => {
  callback(); // 전달받은 함수를 실행
};

testFunc(() => {
  console.log("콜백 함수 테스트"); // 콜백 함수 테스트
});
```

- `testFunc`는 함수를 매개변수로 받아서 실행하는 함수이다.
- `testFunc(() => { ... })`를 호출하면, `()=>{ ... }` 익명 함수가 `callback`이라는 이름으로 전달되고, `testFunc` 내부에서 `callback()`이 실행되면서, 전달한 함수가 실행되어 "콜백 함수 테스트"가 출력된다.

<br>

### 콜백함수 예시 3

```js
// doSomething 함수는 작업을 수행한 후 콜백 함수를 호출합니다
function doSomething(callback) {
  console.log("작업 수행 중...");
  // 작업이 완료된 후 콜백 함수 실행
  callback();
}

// 콜백 함수를 전달하여 함수 호출
doSomething(function () {
  console.log("작업 완료 후 실행됨!");
});
```

```js
// console
작업 수행 중...
작업 완료 후 실행됨!
```

::: details 콜백 함수 이해하기

1. 먼저 <code>doSomething</code>이라는 함수를 정의, 이 함수는 callback이라는 매개변수를 받음

```js
function doSomething(callback) {
  // 함수 내용
}
```

2. <code>doSomething</code> 함수 내부에서는 두 가지 일을 한다 :

- "작업 수행 중..." 메시지를 콘솔에 출력
- 매개변수로 받은 callback 함수를 실행

```js
console.log("작업 수행 중...");
callback(); // 전달받은 함수를 여기서 실행
```

3. 그 다음, <code>doSomething</code> 함수를 호출하면서 익명 함수(anonymous function)를 인자로 전달. 이 익명 함수는 <code>doSomething</code> 함수의 <code>callback</code> 매개변수로 전달

```js
doSomething(function () {
  console.log("작업 완료 후 실행됨!");
});
```

4. 실행 순서
   <code>doSomething</code> 함수가 호출 > "작업 수행 중..." 메시지 콘솔에 출력 > <code>callback</code>이 실행되어 "작업 완료 후 실행됨!" 메시지 콘솔에 출력

실행 결과:

```js
// console
작업 수행 중...
작업 완료 후 실행됨!
```

:::

<br>

### 콜백함수 예시 4

```js
function intro(name, callback) {
  console.log(`안녕하세요 ${name}입니다.`);
  callback();
}

function finish() {
  console.log("감사합니다.");
}

intro("혜빙", finish);

// 안녕하세요 혜빙입니다.
// 감사합니다.
```

- finish 함수처럼, 다른 함수의 인수로 전달된 후 나중에 호출되는 함수를 콜백 함수라고 부른다.
- `intro("혜빙", finish)`에서 finish는 callback이라는 이름으로 전달되어 intro 함수 내부에서 실행된다.
