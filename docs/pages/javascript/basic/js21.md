# DOM API

### DOM Tree

```less
// DOM Tree

Document // 문서노드
└── html
    └── body // 요소노드
        ├── div // 요소노드, 어트리뷰트 노드(태그에 붙는 속성)
        │   └── h1 ("Hello") // 텍스트 노드
        └── div
            └── p("World")
```

- DOM API를 통해 요소에 접근할 때, 문서 노드 → 요소 노드 → 어트리뷰트 → 텍스트 노드 순서로 각 노드에 접근한다.
- 문서 노드는 DOM 트리의 가장 최상위에 위치하기 때문에, 어떤 요소에 접근하더라도 항상 먼저 문서 노드를 통해 시작해야 한다.

<br>

### 요소를 찾고 선택하는 DOM API

#### 1. attribute 노드(속성) 변경

#### document.getElementById(id)

```html
<div class="today-info">
  <div class="date" id="date">02.10.금요일</div>
  <div class="clock" id="clock">15:03</div>
</div>
```

```js
console.log(document.getElementById("date"));
// <div class="date" id="date">02.10.금요일</div>
```

- <code>getElementById</code>는 DOM API가 제공하는 메서드 중 하나로, 특정 id 값을 가진 요소를 찾고 조작할 수 있게 해준다.
- 문서 내에서 id가 같은 요소가 여러 개여도 가장 위에 있는(트리 위쪽에 있는) 첫번째 요소만 반환한다. 하지만 HTML 표준상 id는 문서 내에서 유일(unique)해야 하므로, 보통은 id가 중복되지 않도록 사용하는 것이 맞다.

<br>

#### document.querySelector(cssSelector)

```html
<div class="today-info">
  <div class="date" id="date">02.10.금요일</div>
  <div class="clock" id="clock">15:03</div>
</div>
```

```js
console.log(document.querySelector(".date"));
console.log(document.querySelector("div.date"));
// <div class="date" id="date">02.10.금요일</div>
```

- <code>querySelector</code> CSS 선택자를 이용해 DOM 요소를 찾는 메서드
- <code>.date</code> 클래스 이름이 date인 요소를 가져온다. 같은 의미이지만, 구체적으로 <code>div.date</code>처럼 div 태그 중에 클래스가 date인 요소라고 작성할 수도 있음.

<br>

#### document.querySelectorAll(cssSelector)

```html
<div class="today-info">
  <div class="date" id="date">02.10.금요일</div>
  <div class="date" id="date">15:03</div>
</div>
```

```js
console.log(document.querySelectorAll("div.date"));
```

- <code>querySelectorAll</code>은 CSS 선택자를 사용해서 조건에 맞는 모든 요소를 한 번에 가져오는 메서드
- 반환값은 NodeList라는 유사 배열 형태로, 여러 요소가 포함될 수 있다.

<br>

#### document.getElementsByClassName(class)

```html
<div class="today-info">
  <div class="date" id="date">02.10.금요일</div>
  <div class="date" id="date">15:03</div>
</div>
```

```js
console.log(document.getElementsByClassName("date"));
```

- <code>getElementsByClassName</code>은 동일한 클래스 이름을 가진 모든 요소들을 찾아 반환하는 메서드
- 단순 클래스 이름을 문자로 전달하기 때문에 클래스 이름 앞에 <code>.</code>을 붙이면 안된다.
- 반환되는 값은 HTMLCollection이라는 유사 배열 객체이며, 여러 요소가 있을 경우 인덱스를 통해 접근할 수 있다.

<br>

#### document.getElementsByTagName

```js
console.log(document.getElementsByTagName("div"));
```

- <code>getElementsByTagName</code> 특정 태그 이름을 가진 모든 요소를 찾아 반환하는 메서드
- 예를 들어 "div"를 넣으면, 문서 안에 있는 모든 div 요소들을 찾아서 반환한다. 반환값은 HTMLCollection이라는 유사 배열 객체이다.

<br>

### 요소 조작하기

#### className

```html
<div class="today-info">
  <div class="date" id="date">02.10.금요일</div>
  <div class="clock" id="clock">15:03</div>
</div>
```

```js
console.log(document.getElementById("date").className); // date
```

- className은 요소의 class 속성 값을 문자열로 반환하는 속성

```js
const dateElement = document.getElementById("date");
dateElement.className = "change";

console.log(dateElement); // <div class="change" id="date">02.10.금요일</div>
console.log(dateElement.className); // change
```

- 클래스 이름을 change로 변경
- 변수에 값을 할당하듯이, 원하는 클래스명을 직접 넣으면 된다.

<br>

#### id

```html
<div class="today-info">
  <div class="date" id="date">02.10.금요일</div>
  <div class="clock" id="clock">15:03</div>
</div>
```

```js
console.log(document.querySelector("div.date").id); // date
```

- id는 요소의 id 속성 값을 문자열로 가져오는 속성
- div 태그 중 클래스가 date인 요소를 선택해서, 해당 요소의 id값인 date를 콘솔에 출력

```js
const dateElement = document.querySelector("div.date");
dateElement.id = "change";

console.log(dateElement); // <div class="date" id="change">02.10.금요일</div>
```

- id 값을 change로 변경

<br>

#### classList

```html
<div class="today-info">
  <div class="date" id="date">02.10.금요일</div>
  <div class="clock" id="clock">15:03</div>
</div>
```

```js
console.log(document.getElementById("date").classList);
// DOMTokenList ['date', value: 'date']
```

- classList는 요소의 클래스 목록을 토큰(문자열) 리스트 형태로 반환하는 속성
- 배열처럼 인덱스로 접근할 수 있고, 다양한 메서드를 제공한다.
- className처럼 특정 요소의 class 속성에 접근하지만, 더 다양한 메서드를 제공하여 클래스를 유연하게 조작할 수 있다.
- add, remove, item, toggle, contains, replace 등의 메서드를 제공하며, 이 중 add와 remove는 가장 많이 사용된다.
- className은 클래스 이름 전체가 변경되지만 classList는 기존의 클래스 값에 특정 값을 추가, 제거, 변경이 가능하다.

<br>

```js
const dateElement = document.getElementById("date");
dateElement.classList.add("change");
console.log(dateElement); // <div class="date change" id="date">02.10.금요일</div>
```

- add 메서드를 사용해 change 클래스 추가

<br>

```js
const dateElement = document.getElementById("date");
dateElement.classList.add("change");
dateElement.classList.remove("date");
console.log(dateElement); // <div class="change" id="date">02.10.금요일</div>
```

- remove 메서드를 통해 date 클래스 제거

<br>

#### 2. text 노드 변경

#### textContent

```html
<div class="today-info">
  <div class="date" id="date">02.10.금요일</div>
  <div class="clock" id="clock">15:03</div>
</div>
```

```js
const clockElement = document.getElementById("clock");
clockElement.textContent = "12:00";

// 15:03이 12:00로 변경된다.
```

- <code>textContent</code>는 해당 요소 내부의 모든 텍스트 콘텐츠를 가져오거나 변경할 수 있는 속성
- 즉, HTML 태그를 제외한 순수한 텍스트만을 다루고 싶을 때 사용

<br>

#### 3. 요소 노드 생성

#### createElement(tagName)

```html
<!DOCTYPE html>
<html>
  <body>
    <div class="today-info">
      <div class="date" id="date">02.10.금요일</div>
      <div class="clock" id="clock">15:03</div>
      <!-- <div class="season">spring</div> -->
    </div>
  </body>
</html>
```

```less
Document
└── html
    └── body
        └── div.today-info
            ├── div.date (#date)
            ├── div.clock (#clock)
            // └── div.season (#season)
```

```js
// 1. textContent를 사용해 spring 텍스트 추가

const seasonElement = document.createElement("div"); // div 요소 생성
seasonElement.classList.add("season"); // div에 season 클래스 추가

seasonElement.textContent = "spring";

// 결과: <div class="season">spring</div>
```

- <code>createElement</code> 메서드를 통해 새로운 요소 노드를 생성하고, <code>textContent</code>로 텍스트 추가
- 이 방식은 간단하고 직관적이며, 텍스트가 복잡하지 않을 때 많이 쓰인다.

<br>

```js
// 2. createTextNode 메서드를 사용해 spring 텍스트 노드 생성

const seasonElement = document.createElement("div"); // div 요소 생성
seasonElement.classList.add("season"); // div에 season 클래스 추가

const seasonText = document.createTextNode("spring");

// 결과: <div class="season">spring</div>
```

- <code>createElement</code> 메서드를 사용해 새로운 요소 노드를 생성
- <code>createTextNode</code>는 텍스트만 담긴 별도의 텍스트 노드를 생성하며, 아직 DOM Tree에 추가된 것은 아니다. 이 텍스트 노드는 <code>appendChild()</code>등을 통해 부모 요소에 추가해야한다.
- 이 방식은 텍스트 노드를 더 세밀하게 제어하거나, 여러 텍스트 노드를 합성하는 등 더 유연한 조작이 필요할 때 유용하다.

<br>

```js
const seasonElement = document.createElement("div"); // div 요소 생성
seasonElement.classList.add("season"); // div에 season 클래스 추가

const seasonText = document.createTextNode("spring"); // 텍스트 노드 생성
seasonElement.appendChild(seasonText); // 텍스트 노드를 <div class="season">에 추가

const todayInfoElement = document.querySelector("div.today-info"); // 기존 html의 안에
todayInfoElement.appendChild(seasonElement); // 완성된 div를 DOM에 추가

// <div class="season">spring</div>가 추가된 것을 확인할 수 있음
```

- createElement와 createTextNode는 실제로 DOM에 바로 추가되는 것이 아니라, 브라우저 메모리 상에 임시로 만들어진 노드들이다.
- 이 노드들은 appendChild()를 호출해야 실제로 DOM에 삽입되고, 브라우저 화면에도 렌더링된다.
- appendChild()는 지정한 요소의 마지막 자식으로 노드를 추가한다. 따라서 이미 자식이 있는 요소에 추가하면, 그 맨 끝에 붙게 된다.
- 따라서 이미 자식 노드가 있을 경우, 새 노드는 맨 뒤에 붙는다.

<br>

```js
// 추가 예시
const buttonElement = document.createElement("div"); // div 생성
buttonElement.classList.add("button"); // div에 button 클래스 추가
buttonElement.textContent = "버튼"; // 텍스트 버튼 추가

// DOM에 추가
const todayInfoElement = document.querySelector("div.today-info"); // 기존 요소 선택
todayInfoElement.appendChild(buttonElement); // 새로 만든 div를 DOM에 추가

// 문서 내 모든 div 요소를 HTMLCollection 형태로 출력
console.log(document.getElementsByTagName("div"));
```

- createElement로 새로운 div 요소를 생성하고, classList.add로 button 클래스를 추가
- textContent를 사용해 내부 텍스트를 "버튼"으로 설정
- querySelector로 기존 문서에서 .today-info 클래스를 가진 요소를 선택하고, appendChild를 이용해 새로 만든 버튼 요소를 자식으로 추가
- 마지막으로 getElementsByTagName("div")를 호출해 현재 문서 내 모든 div 요소를 가져오며, 새로 추가된 buttonElement도 포함되어 출력
- getElementsByTagName은 실시간 컬렉션을 반환하므로, DOM 변경 사항이 즉시 반영된다.

<br>

#### addEventListener

```js
element.addEventListener(eventType, listenerFunction);
```

- addEventListener는 DOM 요소에 이벤트를 등록할 수 있는 메서드이다.
- eventType (문자열): 등록할 이벤트 종류
- listenerFunction 함수: 이벤트가 발생했을 때 실행될 함수

<br>

```js
// 추가 예시
const buttonElement = document.createElement("div");
buttonElement.classList.add("button");
buttonElement.textContent = "버튼";

// DOM에 추가
const todayInfoElement = document.querySelector("div.today-info");
todayInfoElement.appendChild(buttonElement);

buttonElement.addEventListener("click", () => {
  window.alert("클릭");
});

// 결과: 버튼 텍스트를 누르면, 클릭이라는 단어가 적힌 경고창이 실행된다.
```

- addEventListener 메서드는 이벤트 종류 외에 listener라는 함수도 매개변수로 받는다. 이 함수는 지정한 이벤트가 발생했을 때 실행된다.
  위 예시에서 버튼을 클릭하면 window.alert 메서드를 호출해 경고창을 띄우는 함수를 전달한다.
- window 객체는 현재 사용하고 있는 웹 브라우저의 창을 나타내며, 경고창을 띄우는 alert, 확인과 취소의 버튼이 있는 confirm과 같은 다양한 메서드들을 포함한다.
